{% import "utils.html" as utils %}

{% extends "layout.html" %}
{% set components = [(ts.name, v4_url_for("v4_recent_activity"))] %}
{% block title %}Machines{%endblock%}


{# Add JS to initialize the graph. #}
{% block onload %}init(){% endblock %}

{% block javascript %}

function init() {
    // Filter table by filter text box.
    $(document).ready(function() {
        (function ($) {
            $('#filter').keyup(function () {
                
                var filter_regex = new RegExp($(this).val(), 'i');
                $('.searchable tr').hide();
                $('.searchable tr').filter(function () {
                    return filter_regex.test($(this).text());
                }).show();
            })
        }(jQuery));
    });
}

{% endblock %}

</script>

{% block body %}
<div class="input-group"> <span class="input-group-addon">Filter</span>
    <input id="filter" type="text" class="form-control" placeholder="Machines...">
</div>

  <section id="machines" />
  {# List all Machines which reported for this database. #}
  <h3>Machines</h3>
  <table class="table table-striped table-hover table-condensed">
    <thead>
      <tr>
        <th>Name</th>
      </tr>
    </thead>
    <tbody class="searchable">
      {# Show the active submissions. #}
      {% for r in ts.query(ts.Machine) %}
      <tr>
        <td>{{ utils.render_machine(r) }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
